<section class="dashboard">
	@if (animeList$ | async; as animeList) {
		<div class="dashboard__filters">
			<mat-form-field appearance="outline" subscriptSizing="dynamic">
				<mat-select
					(selectionChange)="handleFilter($event)"
					placeholder="Type of an anime"
					[formControl]="selectControl"
					multiple
				>
					@for (type of animeTypes; track type){
						<mat-option [value]="type">
							{{ type }}
						</mat-option>
					}
				</mat-select>
			</mat-form-field>
			<form class="search-form" (ngSubmit)="handleSearch()">
				<mat-form-field appearance="outline" subscriptSizing="dynamic">
					<input
						matInput
						type="text"
						placeholder="Search an anime"
						name="search"
						[formControl]="searchControl"
					/>
				</mat-form-field>
				<button mat-stroked-button type="submit">Search</button>
			</form>
		</div>
		<div>
			@if (animeParams$ | async; as animeParams) {
				<camp-anime-table class="anime-table" [animeList]="animeList.results" matSort [sortParams]="animeParams.sort" (sortChange)="handleSortChange($event)"/>
				<mat-paginator
					class="pagination"
					[length]="animeList.count"
					[pageSize]="animeParams.pageSize"
					[showFirstLastButtons]="true"
					[pageSizeOptions]="[5, 10, 15]"
					[pageIndex]="animeParams.pageIndex"
					(page)="handlePageEvent($event)"
					[disabled]="animeList.results.length === 0"
				/>
			}
		</div>
	} @else {
		<camp-basic-progress-spinner />
	}
</section>
