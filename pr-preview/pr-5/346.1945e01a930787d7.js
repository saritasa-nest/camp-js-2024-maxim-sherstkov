"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[346],{3346:(I,d,t)=>{t.r(d),t.d(d,{RegisterComponent:()=>N});var r=t(7788),p=t(6610),s=t(7222),c=t(7533),h=t(643),l=t(2221),m=t(6375),u=t(4587),f=t(6182),g=t(5981),v=t(4526),F=t(756),R=t(8486),E=t(7212),y=t(5860);class C extends y.b{constructor(a){super(),this.email=a.email,this.password=a.password,this.firstName=a.firstName,this.lastName=a.lastName}}var w=t(4509),P=t(922),S=t(2224),b=t(2118),$=t(2019);class j{static passwordMatcher(a){const i=a.get("password"),o=a.get("confirmPassword");return i.pristine||o.pristine||i.value===o.value?null:{passwordMatch:!0}}}class M{isErrorState(a){return(a?.parent?.invalid&&a.touched)??!1}}let N=(()=>{class n{constructor(){this.destroyRef=(0,r.WQX)(r.abz),this.changeDetector=(0,r.WQX)(r.gRc),this.formBuilder=(0,r.WQX)(s.ok),this.authService=(0,r.WQX)(c.u),this.router=(0,r.WQX)(P.Ix),this.formErrorService=(0,r.WQX)(w._),this.confirmValidParentMatcher=new M,this.registerForm=this.formBuilder.group({email:["",[s.k0.required,s.k0.email]],passwordGroup:this.formBuilder.group({password:["",[s.k0.required,s.k0.minLength(8)]],confirmPassword:["",s.k0.required]},{validators:j.passwordMatcher}),firstName:["",[s.k0.required,s.k0.maxLength(30)]],lastName:["",[s.k0.required,s.k0.maxLength(30)]]}),this.hidePassword$=new g.t(!0)}onSubmit(){if(this.registerForm.invalid)return;const i=new C({...this.registerForm.value,password:this.registerForm.value.passwordGroup.password});this.authService.register(i).pipe((0,E.pQ)(this.destroyRef),(0,v.W)(o=>(o instanceof b.c&&(this.formErrorService.renderServerErrors(this.registerForm,o),this.changeDetector.markForCheck()),(0,F.of)(null)))).subscribe(o=>{null!==o&&this.router.navigate([S.n.home])})}clickHidePassword(i){this.hidePassword$.pipe((0,R.s)(1)).subscribe(o=>this.hidePassword$.next(!o)),i.stopPropagation()}static#r=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=r.VBU({type:n,selectors:[["camp-register"]],standalone:!0,features:[r.aNF],decls:48,vars:21,consts:[[1,"register__form",3,"ngSubmit","formGroup"],["subscriptSizing","dynamic","appearance","outline",1,"register__input-field"],["matInput","","formControlName","email","type","email"],["matInput","","formControlName","firstName","type","text"],["matInput","","formControlName","lastName","type","text"],["formGroupName","passwordGroup",1,"password-group"],["matInput","","formControlName","password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["matInput","","formControlName","confirmPassword",3,"type","errorStateMatcher"],[1,"register__actions"],["mat-stroked-button","","type","submit",3,"disabled"]],template:function(o,e){1&o&&(r.j41(0,"camp-auth")(1,"form",0),r.bIt("ngSubmit",function(){return e.onSubmit()}),r.j41(2,"mat-form-field",1)(3,"mat-label"),r.EFF(4,"Email"),r.k0s(),r.nrm(5,"input",2),r.j41(6,"mat-error")(7,"span"),r.EFF(8),r.k0s()()(),r.j41(9,"mat-form-field",1)(10,"mat-label"),r.EFF(11,"First name"),r.k0s(),r.nrm(12,"input",3),r.j41(13,"mat-error")(14,"span"),r.EFF(15),r.k0s()()(),r.j41(16,"mat-form-field",1)(17,"mat-label"),r.EFF(18,"Last name"),r.k0s(),r.nrm(19,"input",4),r.j41(20,"mat-error")(21,"span"),r.EFF(22),r.k0s()()(),r.j41(23,"div",5)(24,"mat-form-field",1)(25,"mat-label"),r.EFF(26,"Password"),r.k0s(),r.nrm(27,"input",6),r.nI1(28,"async"),r.j41(29,"button",7),r.nI1(30,"async"),r.bIt("click",function(G){return e.clickHidePassword(G)}),r.j41(31,"mat-icon"),r.EFF(32),r.nI1(33,"async"),r.k0s()(),r.j41(34,"mat-error")(35,"span"),r.EFF(36),r.k0s()()(),r.j41(37,"mat-form-field",1)(38,"mat-label"),r.EFF(39,"Confirm password"),r.k0s(),r.nrm(40,"input",8),r.nI1(41,"async"),r.j41(42,"mat-error")(43,"span"),r.EFF(44),r.k0s()()()(),r.j41(45,"div",9)(46,"button",10),r.EFF(47,"Register"),r.k0s()()()()),2&o&&(r.R7$(),r.Y8G("formGroup",e.registerForm),r.R7$(7),r.JRh(e.formErrorService.getFieldError(e.registerForm,"email")),r.R7$(7),r.JRh(e.formErrorService.getFieldError(e.registerForm,"firstName")),r.R7$(7),r.JRh(e.formErrorService.getFieldError(e.registerForm,"lastName")),r.R7$(5),r.Y8G("type",r.bMT(28,13,e.hidePassword$)?"password":"text"),r.R7$(2),r.BMQ("aria-label","Hide password")("aria-pressed",r.bMT(30,15,e.hidePassword$)),r.R7$(3),r.JRh(r.bMT(33,17,e.hidePassword$)?"visibility_off":"visibility"),r.R7$(4),r.JRh(e.formErrorService.getFieldError(e.registerForm,"passwordGroup.password")),r.R7$(4),r.Y8G("type",r.bMT(41,19,e.hidePassword$)?"password":"text")("errorStateMatcher",e.confirmValidParentMatcher),r.R7$(4),r.JRh(e.formErrorService.getFieldError(e.registerForm,"passwordGroup")),r.R7$(2),r.Y8G("disabled",e.registerForm.invalid))},dependencies:[p.MD,p.Jj,s.X1,s.qT,s.me,s.BC,s.cb,s.j4,s.JD,s.$R,h.Hu,l.Hl,l.$z,l.iY,m.RG,m.rl,m.nJ,m.TL,m.yw,u.fS,u.fg,f.m_,f.An,$.i],styles:[".register__input-field[_ngcontent-%COMP%]{width:100%}.register__form[_ngcontent-%COMP%]{--input-gap: var(--space-3);display:flex;flex-direction:column;gap:var(--input-gap)}.password-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--input-gap)}.register__content[_ngcontent-%COMP%]:last-child{padding:0}.register__actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"],changeDetection:0})}return n})()}}]);